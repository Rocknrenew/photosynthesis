<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Babbles text generated from your images.">
	<meta name="author" content="Ross Goodwin">
	<title>photo synthesis</title>

<link href='http://fonts.googleapis.com/css?family=Cousine:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

	<!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

<!-- Optional theme -->
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css"> -->

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <!-- Custom styles for this template -->
    <link href="/static/css/cover.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

<style>

#p5canvas {
  z-index: 100;
  width:100%;
  height:100%;
  top:0;
  left:0;
  display:none;
  position:fixed;
  background-color: #F2F1EF;
  overflow:auto;
}

#loadvid {
  width: 900px;
  height: 600px;
  margin: auto;
}

.submit {
	text-align: center;
}

.round {
	border-radius: 20%;
}

label.btn input[type="file"] {
    position: fixed;
    top: -1000px;
}

.custom-font {
	font-family: "Cousine", monospace;
	/*text-align: left;*/
}

.align-center {
	/*text-align: left;*/
	padding-bottom: 40px;
}

.green-text {
	color: #87D37C;
}

.top-space {
	padding-top: 50px;
}

a.underline-links {
	text-decoration: underline;
}

</style>

</head>

<body>

<div id="p5canvas"></div>

<div class="site-wrapper custom-font">

      <div class="site-wrapper-inner">

        <div class="cover-container">

          <div class="masthead clearfix">
            <div class="inner">
              <!-- <h3 class="masthead-brand">VIDEO PIZZA</h3> -->
              <!-- <nav>
                <ul class="nav masthead-nav">
                  <li class="active"><a href="#">Home</a></li>
                  <li><a href="#">About</a></li>
                </ul>
              </nav> -->
            </div>
          </div>

          <div class="inner cover">
            <h1 class="cover-heading align-center">photo synthesis</h1>
            <p class="lead">
<!--             <form method="post" action="sum" id="video-url-submit">
              <div class="urlbox">
                <input name="videourl" type="text" size=50 maxlength=200 placeholder="Type Video URL Here" tabindex="1"/>
              </div>
              <div class="submit">
                <button class="btn btn-lg btn-danger" type="submit" tabindex="1" onclick="divShow()">Make GIF Summary</button>
              </div>
            </form> -->
            <div class="submit">
	            <form id="form" action="img" method="post" enctype="multipart/form-data">
	            	<label class="btn btn-lg btn-danger round">
						<input type="file" capture="camera" accept="image/*" id="file" name="file">
						<img src="/static/assets/capture_icon.png">
					</label>
				</form>
			</div>
            </p>
            <p class="lead top-space">generative text camera<br />by <a href="http://rossgoodwin.com">ross goodwin</a>, 2015</p>
            <p><small>powered by <a href="http://clarifai.com">clarifai</a> &amp; <a href="http://conceptnet5.media.mit.edu/">conceptnet</a></small></p>
          </div>

          <div class="mastfoot">
            <div class="inner">
              <!-- <p>Cover template for <a href="http://getbootstrap.com">Bootstrap</a>, by <a href="https://twitter.com/mdo">@mdo</a>.</p> -->
            </div>
          </div>

        </div>

      </div>

    </div>

<script>

function divShow() {
  document.getElementById('p5canvas').style.display = "block";
}

function divHide() {
  document.getElementById('p5canvas').style.display = "none";
}

document.getElementById("file").onchange = function() {
    document.getElementById("form").submit();
    divShow();
    loop();
};

</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script src="/static/js/libs/p5.min.js" type="text/javascript"></script>
<script src="/static/js/libs/p5.min.js" type="text/javascript"></script>

<script>

// function loadscreen() {
//   if (document.getElementById("ti1").value != "") {
//     loop();
//   }
// }

var i = 0;
var statusList = ['init convo net', 'analyzing image', 'generating tags', 'init conceptnet db', 'making coffee', 'lexical assoc queries', 'assembling sentences', 'drinking coffee', 'assembling sentences', 'smoking cigarettes', 'assembling sentences', 'drinking coffee', 'consulting templates', 'drinking whiskey', 'assembling sentences', 'drinking whiskey', 'assembling sentences', 'mutating PPNs', 'mumbling unintelligibly', 'assembling sentences', 'rationalizing life choices', 'assembling sentences', 'smoking cigarettes', 'consulting template engine', 'drinking whiskey', 'reticulating splines', 'borkulating', 'reticulating splines', 'reborkulating'];
var onScreen = [];
var rhb = [];
var imgCount = 0;

function preload() {
  for (n=0;n<14;n++) {
    rhb[n] = loadImage("/static/assets/rhb/"+n+".png");
  }
}

function setup() {
  var myCanvas = createCanvas(500, 1500);
  myCanvas.parent('p5canvas');
  noLoop();
}

function draw() {
  background(242, 241, 239);

  if (i >= statusList.length) {
    i = 18;
  }
  var currentStatus = statusList[i];

  fill(242, 38, 19);
  noStroke();
  textSize(18);
  textFont("Monospace");
  
  image(rhb[imgCount], 0, 0);

  if (frameCount > 0) {
    text(currentStatus, 15, 270);
  }  

  imgCount++;
  if (imgCount > 13) {
  	imgCount = 0;
  }

  var k = 0;
  for (j=onScreen.length - 1; j>=0; j--) {
    text(onScreen[j], 15, 290+20*k);
    k++;
  }
  
  var x = Math.random() >= 0.3;
  if (frameCount > 0 && frameCount % 60 === 0 && x) {
    i++;
    append(onScreen, currentStatus);
  }
}

</script>

</body>
</html>